# SIEM Disaster Recovery Configuration
# This file contains all configuration parameters for automated disaster recovery

# ===== AWS Configuration =====
# AWS region for disaster recovery infrastructure
AWS_REGION="us-west-2"

# VPC configuration
VPC_CIDR="10.1.0.0/16"
AVAILABILITY_ZONES=("us-west-2a" "us-west-2b" "us-west-2c")

# EC2 configuration
INSTANCE_TYPE="t3.large"
CLICKHOUSE_INSTANCE_TYPE="c5.xlarge"
KAFKA_INSTANCE_TYPE="m5.large"
KEY_PAIR_NAME="siem-disaster-recovery"

# Storage configuration
ROOT_VOLUME_SIZE="50"
DATA_VOLUME_SIZE="100"

# ===== Backup Configuration =====
# S3 bucket containing SIEM backups
BACKUP_BUCKET="siem-disaster-recovery-backups"
BACKUP_PREFIX="siem-backups"

# Backup manager configuration
BACKUP_MANAGER_VERSION="latest"
BACKUP_MANAGER_URL="https://github.com/company/siem_backup_manager/releases/download/${BACKUP_MANAGER_VERSION}/siem_backup_manager"

# ===== Network Configuration =====
# Load balancer configuration
LOAD_BALANCER_TYPE="application"
LOAD_BALANCER_SCHEME="internet-facing"

# Security group rules
ALLOWED_CIDR_BLOCKS=("0.0.0.0/0")  # Restrict this in production
SSH_CIDR_BLOCKS=("10.0.0.0/8")

# ===== DNS Configuration =====
# Route53 configuration (optional)
ROUTE53_HOSTED_ZONE_ID=""  # Set this to your hosted zone ID
DOMAIN_NAME=""             # Set this to your domain name (e.g., siem.company.com)

# ===== Service Configuration =====
# SIEM service versions
SIEM_API_VERSION="latest"
SIEM_INGESTOR_VERSION="latest"
SIEM_CONSUMER_VERSION="latest"
SIEM_RULE_ENGINE_VERSION="latest"

# Container registry
# CONTAINER_REGISTRY="docker.io"  # Removed - Docker-free deployment
CONTAINER_REPOSITORY="company/siem"

# ===== Database Configuration =====
# ClickHouse cluster configuration
CLICKHOUSE_VERSION="23.3"
CLICKHOUSE_DATABASE="dev"
CLICKHOUSE_USER="default"
CLICKHOUSE_PASSWORD=""

# Replication configuration
CLICKHOUSE_REPLICATION_FACTOR=3
CLICKHOUSE_SHARD_COUNT=1

# ===== Kafka Configuration =====
# Kafka cluster configuration
KAFKA_VERSION="7.4.0"
KAFKA_BROKER_COUNT=3
KAFKA_REPLICATION_FACTOR=3
KAFKA_MIN_INSYNC_REPLICAS=2

# Topic configuration
KAFKA_PARTITIONS_EVENTS=6
KAFKA_PARTITIONS_ALERTS=3

# ===== Monitoring Configuration =====
# Health check configuration
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_RETRIES=30
HEALTH_CHECK_INTERVAL=10

# Performance benchmarks
MIN_API_RESPONSE_TIME_MS=500
MIN_THROUGHPUT_EVENTS_PER_SEC=1000

# ===== Security Configuration =====
# JWT configuration
JWT_SECRET="your-secret-key"  # Change this in production
JWT_EXPIRATION_HOURS=24

# API authentication
ADMIN_TOKEN_DURATION_HOURS=1
AGENT_API_KEY="agent-api-key-12345"  # Change this in production

# ===== Recovery Configuration =====
# Recovery timeouts
INFRASTRUCTURE_PROVISION_TIMEOUT=3600  # 1 hour
SOFTWARE_INSTALL_TIMEOUT=1800         # 30 minutes
BACKUP_RESTORE_TIMEOUT=7200           # 2 hours
SERVICE_DEPLOY_TIMEOUT=1800           # 30 minutes
VERIFICATION_TIMEOUT=900              # 15 minutes

# Retry configuration
MAX_RETRIES=3
RETRY_DELAY=60

# ===== Notification Configuration =====
# Notification settings (optional)
SLACK_WEBHOOK_URL=""     # Set for Slack notifications
EMAIL_RECIPIENTS=""      # Comma-separated email addresses
PHONE_NUMBERS=""         # Comma-separated phone numbers for SMS

# PagerDuty configuration (optional)
PAGERDUTY_INTEGRATION_KEY=""
PAGERDUTY_SEVERITY="critical"

# ===== Logging Configuration =====
# Log levels: DEBUG, INFO, WARN, ERROR
LOG_LEVEL="INFO"
LOG_RETENTION_DAYS=30

# Log file paths
DR_LOG_FILE="/var/log/siem_disaster_recovery.log"
INFRASTRUCTURE_LOG_FILE="/var/log/siem_infrastructure.log"
SERVICE_LOG_FILE="/var/log/siem_services.log"

# ===== Validation Configuration =====
# Data validation settings
VALIDATE_DATA_INTEGRITY=true
VALIDATE_PERFORMANCE=true
VALIDATE_SECURITY=true

# Test event settings
TEST_EVENT_COUNT=100
TEST_EVENT_RATE=10  # events per second

# ===== Environment-Specific Overrides =====
# Development environment overrides
if [ "${ENVIRONMENT:-}" = "development" ]; then
    INSTANCE_TYPE="t3.micro"
    CLICKHOUSE_INSTANCE_TYPE="t3.small"
    KAFKA_INSTANCE_TYPE="t3.small"
    DATA_VOLUME_SIZE="20"
    ALLOWED_CIDR_BLOCKS=("0.0.0.0/0")
fi

# Staging environment overrides
if [ "${ENVIRONMENT:-}" = "staging" ]; then
    INSTANCE_TYPE="t3.medium"
    CLICKHOUSE_INSTANCE_TYPE="c5.large"
    KAFKA_INSTANCE_TYPE="m5.medium"
    DATA_VOLUME_SIZE="50"
fi

# Production environment overrides
if [ "${ENVIRONMENT:-}" = "production" ]; then
    INSTANCE_TYPE="t3.xlarge"
    CLICKHOUSE_INSTANCE_TYPE="c5.2xlarge"
    KAFKA_INSTANCE_TYPE="m5.xlarge"
    DATA_VOLUME_SIZE="500"
    ALLOWED_CIDR_BLOCKS=("10.0.0.0/8")
    LOG_LEVEL="WARN"
fi

# ===== Feature Flags =====
# Feature toggles for disaster recovery
ENABLE_INFRASTRUCTURE_PROVISIONING=true
ENABLE_SOFTWARE_INSTALLATION=true
ENABLE_BACKUP_RESTORATION=true
ENABLE_SERVICE_DEPLOYMENT=true
ENABLE_LOAD_BALANCER_CONFIG=true
ENABLE_DNS_UPDATE=false  # Set to true if using Route53
ENABLE_FINAL_VERIFICATION=true
ENABLE_NOTIFICATIONS=false  # Set to true if notifications configured

# Advanced features
ENABLE_PERFORMANCE_TESTING=true
ENABLE_SECURITY_VALIDATION=true
ENABLE_AGENT_SIMULATION=false
ENABLE_CHAOS_TESTING=false

# ===== Backup Validation =====
# Backup integrity checks
VERIFY_BACKUP_CHECKSUMS=true
VERIFY_BACKUP_COMPLETENESS=true
VERIFY_BACKUP_AGE_HOURS=48  # Maximum backup age in hours

# ===== Custom Configuration =====
# Add custom configuration variables below as needed
# CUSTOM_VARIABLE="value"